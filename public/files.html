<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
    />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <!--本页面不缓存-->
    <!--<META HTTP-EQUIV="pragma" CONTENT="no-cache">-->
    <!--<META HTTP-EQUIV="Cache-Control" CONTENT="no-cache, must-revalidate">-->
    <!--<META HTTP-EQUIV="expires" CONTENT="0">-->
    <title>智慧城管专题</title>
    <link rel="stylesheet" type="text/css" href="css/linkstyles.css" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <link rel="stylesheet" type="text/css" href="css/animate.min.css" />
  </head>
  <body>
    <div id="screen">
      <div class="content">
        <!--头部-->
        <div class="header" flex="dir:left">
          <!--中间的icon-->
          <div class="header-left" flex="main:center cross:center">
            城市管理运行指挥中心
          </div>
          <div class="header-nav" flex="main:center cross:center">
            <a href="control.html">
              <div class="nav-icon nav" flex="dir:top main:justify cross:center">
                <img src="image/xqgk.png" alt="" />
                <div class="icon-title" flex="main:center cross:center">辖区概况</div>
              </div>
            </a>
            <a>
              <div class="nav-icon nav active" flex="dir:top main:justify cross:center">
                <img src="image/zhcg-a.png" alt="" />
                <div class="icon-title" flex="main:center cross:center">智慧城管</div>
              </div>
            </a>
            <a href="zhzf.html">
              <div class="nav-icon nav" flex="dir:top main:justify cross:center">
                <img src="image/zhzf.png" alt="" />
                <div class="icon-title" flex="main:center cross:center">综合执法</div>
              </div>
            </a>
            <a>
              <div class="nav-icon nav" flex="dir:top main:justify cross:center">
                <img src="image/cstz.png" alt="" />
                <div class="icon-title" flex="main:center cross:center">城市体征</div>
              </div>
            </a>
            <a>
              <div class="nav-icon nav" flex="dir:top main:justify cross:center">
                <img src="image/dlhx.png" alt="" />
                <div class="icon-title" flex="main:center cross:center">道路画像</div>
              </div>
            </a>
            <a>
              <div class="nav-icon nav" flex="dir:top main:justify cross:center">
                <img src="image/znfx.png" alt="" />
                <div class="icon-title" flex="main:center cross:center">智能分析</div>
              </div>
            </a>
            <!--左右的滚动箭头-->
            <div class="nav-left-zuo">
              <div class="zuo" flex="dir:left"></div>
            </div>
            <div class="nav-left-you"></div>
            <!--左右的滚动箭头-->
            <!--中间的横线-->
            <div class="nav-border-mid">
              <img src="image/nav-border.png" alt="" />
              <!--<img class="hover" src="image/nav.png" alt="">-->
            </div>
            <!--中间的横线-->
          </div>
          <div class="header-right" flex=" main:center cross:center">
            <div class="time>" flex="dir:left main:center cross:center">
              <div class="years" flex="dir:left">
                <div class="year">2011</div>
                &nbsp;-&nbsp;
                <div class="month">10</div>
                &nbsp;-&nbsp;
                <div class="day">15</div>
              </div>
              <div class="hour" flex="dir:left">
                <div class="hours">12</div>
                &nbsp;:&nbsp;
                <div class="minutes">20</div>
                &nbsp;:&nbsp;
                <div class="seconds">30</div>
              </div>
              <div class="week">周三</div>
            </div>
          </div>
        </div>
        <!--头部-->

        <!--主题内容-->
        <div class="main" flex="dir:left main:center cross:center">
          <div class="files" flex="dir:left">
            <div class="files-left" flex="dir:top">
              <div class="files-left-t">
                <div class="statistics-header" flex="cross:center">
                  案卷统计
                </div>
                <div class="statistics-body">
                  <div class="body-t">
                    <div class="body-t-header" flex="dir:left cross:center">
                      <img src="image/laiyuan.png" alt="" />
                      来源方式
                    </div>
                    <div class="body-t-body">
                      <div id="chartsSource"></div>
                    </div>
                  </div>
                  <div class="body-b">
                    <div class="body-b-header" flex="dir:left cross:center">
                      <img src="image/gaofa.png" alt="" />
                      高发问题TOP5
                    </div>
                    <div class="body-b-body" flex="dir:left cross:center main:center">
                      <div id="echart-columnar"></div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="files-left-b">
                <div class="statistics-header" flex="cross:center">
                  案卷热词分析
                </div>
                <div id="hotWord"></div>
              </div>
            </div>
            <div class="files-center" flex="dir:top">
              <div class="files-center-t">
                <div class="files-center-t-header" flex="cross:center">
                  <div class="center-header-title">案卷处理概况</div>
                </div>
                <div class="files-num" flex="dir:left main:center cross:center">
                  <ul flex="dir:left ">
                    <li flex="main:center cross:center dir:top">
                      <div class="num-top" flex="main:center cross:center">
                        <div class="num-t-l" flex="main:center cross:center">
                          <div class="waiyuan"></div>
                          <div class="zhongyuan">
                            <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.3/TweenMax.min.js"></script>
                            <svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
                              <defs>
                                <filter id="mainGlow" x="-100%" y="-100%" width="250%" height="250%">
                                  <feGaussianBlur class="mainGlowBlur" stdDeviation="16" result="coloredBlur" />
                                  <feOffset dx="0" dy="0" result="offsetblur"></feOffset>
                                  <feFlood id="bulbGlowAlpha" flood-color="#50FFFF" flood-opacity="1"></feFlood>
                                  <feComposite in2="offsetblur" operator="atop"></feComposite>
                                  <feMerge>
                                    <feMergeNode />
                                    <feMergeNode in="SourceGraphic"></feMergeNode>
                                  </feMerge>
                                </filter>
                                <filter id="blueGlow" x="-100%" y="-100%" width="250%" height="250%">
                                  <feGaussianBlur class="mainGlowBlur" stdDeviation="6" result="coloredBlur" />
                                  <feOffset dx="0" dy="0" result="offsetblur"></feOffset>
                                  <feFlood id="bulbGlowAlpha" flood-color="#2144FB" flood-opacity="1"></feFlood>
                                  <feComposite in2="offsetblur" operator="in"></feComposite>
                                  <feMerge>
                                    <feMergeNode />
                                    <feMergeNode in="SourceGraphic"></feMergeNode>
                                  </feMerge>
                                </filter>
                                <radialGradient id="outlineGrad" cx="400" cy="100" r="300" gradientUnits="userSpaceOnUse">
                                  <stop offset="0" stop-color="#FFF" />
                                  <stop offset="0.3" stop-color="#50FFFF" stop-opacity="0.5" />
                                  <stop offset="1" stop-opacity="0" />
                                </radialGradient>
                                <radialGradient id="blueGrad" cx="400" cy="300" r="600" gradientUnits="userSpaceOnUse">
                                  <stop offset="0" stop-color="#2144FB" />
                                  <stop offset="1" stop-opacity="0" />
                                </radialGradient>
                              </defs>

                              <g class="whole">
                                <circle
                                  filter="url(#blueGlow)"
                                  class="blueRing"
                                  cx="400"
                                  cy="300"
                                  r="200"
                                  fill="none"
                                  stroke-width="8"
                                  stroke="url(#blueGrad)"
                                />

                                <g class="mainRing">
                                  <circle
                                    filter="url(#mainGlow)"
                                    cx="400"
                                    cy="300"
                                    r="200"
                                    fill="none"
                                    stroke-width="14"
                                    stroke="url(#outlineGrad)"
                                  />
                                </g>
                              </g>
                            </svg>
                          </div>
                          <div class="neiyuan">
                            <div class="loader"></div>
                          </div>
                          <div class="leijiicon">
                            <img src="image/shangbao.png" alt="" />
                          </div>
                        </div>
                        <div class="num-t-r" flex="dir:top cross:center">
                          <div>累计上报数</div>
                          <div class="shangBaoShu ZSLS" id="ZSLS">8888</div>
                        </div>
                      </div>
                      <div class="num-boo" flex="cross:center main:center">
                        今日新增：<span class="today-ZSLS" id="today-ZSLS">200</span>
                      </div>
                    </li>
                    <li flex="main:center cross:center dir:top">
                      <div class="num-top" flex="main:center cross:center">
                        <div class="num-t-l" flex="main:center cross:center">
                          <div class="waiyuan"></div>
                          <div class="zhongyuan">
                            <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.3/TweenMax.min.js"></script>
                            <svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
                              <defs>
                                <filter id="mainGlow" x="-100%" y="-100%" width="250%" height="250%">
                                  <feGaussianBlur class="mainGlowBlur" stdDeviation="16" result="coloredBlur" />
                                  <feOffset dx="0" dy="0" result="offsetblur"></feOffset>
                                  <feFlood id="bulbGlowAlpha" flood-color="#50FFFF" flood-opacity="1"></feFlood>
                                  <feComposite in2="offsetblur" operator="atop"></feComposite>
                                  <feMerge>
                                    <feMergeNode />
                                    <feMergeNode in="SourceGraphic"></feMergeNode>
                                  </feMerge>
                                </filter>
                                <filter id="blueGlow" x="-100%" y="-100%" width="250%" height="250%">
                                  <feGaussianBlur class="mainGlowBlur" stdDeviation="6" result="coloredBlur" />
                                  <feOffset dx="0" dy="0" result="offsetblur"></feOffset>
                                  <feFlood id="bulbGlowAlpha" flood-color="#2144FB" flood-opacity="1"></feFlood>
                                  <feComposite in2="offsetblur" operator="in"></feComposite>
                                  <feMerge>
                                    <feMergeNode />
                                    <feMergeNode in="SourceGraphic"></feMergeNode>
                                  </feMerge>
                                </filter>
                                <radialGradient id="outlineGrad" cx="400" cy="100" r="300" gradientUnits="userSpaceOnUse">
                                  <stop offset="0" stop-color="#FFF" />
                                  <stop offset="0.3" stop-color="#50FFFF" stop-opacity="0.5" />
                                  <stop offset="1" stop-opacity="0" />
                                </radialGradient>
                                <radialGradient id="blueGrad" cx="400" cy="300" r="600" gradientUnits="userSpaceOnUse">
                                  <stop offset="0" stop-color="#2144FB" />
                                  <stop offset="1" stop-opacity="0" />
                                </radialGradient>
                              </defs>

                              <g class="whole">
                                <circle
                                  filter="url(#blueGlow)"
                                  class="blueRing"
                                  cx="400"
                                  cy="300"
                                  r="200"
                                  fill="none"
                                  stroke-width="8"
                                  stroke="url(#blueGrad)"
                                />

                                <g class="mainRing">
                                  <circle
                                    filter="url(#mainGlow)"
                                    cx="400"
                                    cy="300"
                                    r="200"
                                    fill="none"
                                    stroke-width="14"
                                    stroke="url(#outlineGrad)"
                                  />
                                </g>
                              </g>
                            </svg>
                          </div>
                          <div class="neiyuan">
                            <div class="loader"></div>
                          </div>
                          <div class="leijiicon">
                            <img src="image/leijilianshu.png" alt="" />
                          </div>
                        </div>
                        <div class="num-t-r" flex="dir:top cross:center">
                          <div>累计立案数</div>
                          <div class="shangBaoShu LAS" id="LAS">1488</div>
                        </div>
                      </div>
                      <div class="num-boo" flex="cross:center main:center">
                        今日新增：<span class="today-LAS" id="today-LAS">200</span>
                      </div>
                    </li>
                    <li flex="main:center cross:center dir:top">
                      <div class="num-top" flex="main:center cross:center">
                        <div class="num-t-l" flex="main:center cross:center">
                          <div class="waiyuan"></div>
                          <div class="zhongyuan">
                            <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.3/TweenMax.min.js"></script>
                            <svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
                              <defs>
                                <filter id="mainGlow" x="-100%" y="-100%" width="250%" height="250%">
                                  <feGaussianBlur class="mainGlowBlur" stdDeviation="16" result="coloredBlur" />
                                  <feOffset dx="0" dy="0" result="offsetblur"></feOffset>
                                  <feFlood id="bulbGlowAlpha" flood-color="#50FFFF" flood-opacity="1"></feFlood>
                                  <feComposite in2="offsetblur" operator="atop"></feComposite>
                                  <feMerge>
                                    <feMergeNode />
                                    <feMergeNode in="SourceGraphic"></feMergeNode>
                                  </feMerge>
                                </filter>
                                <filter id="blueGlow" x="-100%" y="-100%" width="250%" height="250%">
                                  <feGaussianBlur class="mainGlowBlur" stdDeviation="6" result="coloredBlur" />
                                  <feOffset dx="0" dy="0" result="offsetblur"></feOffset>
                                  <feFlood id="bulbGlowAlpha" flood-color="#2144FB" flood-opacity="1"></feFlood>
                                  <feComposite in2="offsetblur" operator="in"></feComposite>
                                  <feMerge>
                                    <feMergeNode />
                                    <feMergeNode in="SourceGraphic"></feMergeNode>
                                  </feMerge>
                                </filter>
                                <radialGradient id="outlineGrad" cx="400" cy="100" r="300" gradientUnits="userSpaceOnUse">
                                  <stop offset="0" stop-color="#FFF" />
                                  <stop offset="0.3" stop-color="#50FFFF" stop-opacity="0.5" />
                                  <stop offset="1" stop-opacity="0" />
                                </radialGradient>
                                <radialGradient id="blueGrad" cx="400" cy="300" r="600" gradientUnits="userSpaceOnUse">
                                  <stop offset="0" stop-color="#2144FB" />
                                  <stop offset="1" stop-opacity="0" />
                                </radialGradient>
                              </defs>

                              <g class="whole">
                                <circle
                                  filter="url(#blueGlow)"
                                  class="blueRing"
                                  cx="400"
                                  cy="300"
                                  r="200"
                                  fill="none"
                                  stroke-width="8"
                                  stroke="url(#blueGrad)"
                                />

                                <g class="mainRing">
                                  <circle
                                    filter="url(#mainGlow)"
                                    cx="400"
                                    cy="300"
                                    r="200"
                                    fill="none"
                                    stroke-width="14"
                                    stroke="url(#outlineGrad)"
                                  />
                                </g>
                              </g>
                            </svg>
                          </div>
                          <div class="neiyuan">
                            <div class="loader"></div>
                          </div>
                          <div class="leijiicon">
                            <img src="image/leijichulishu.png" alt="" />
                          </div>
                        </div>
                        <div class="num-t-r" flex="dir:top cross:center">
                          <div>累计处理数</div>
                          <div class="shangBaoShu CZS" id="CZS">2166</div>
                        </div>
                      </div>
                      <div class="num-boo" flex="cross:center main:center">
                        今日新增：<span class="today-CZS" id="today-CZS">168</span>
                      </div>
                    </li>
                    <li flex="main:center cross:center dir:top">
                      <div class="num-top" flex="main:center cross:center">
                        <div class="num-t-l" flex="main:center cross:center">
                          <div class="waiyuan"></div>
                          <div class="zhongyuan">
                            <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.3/TweenMax.min.js"></script>
                            <svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
                              <defs>
                                <filter id="mainGlow" x="-100%" y="-100%" width="250%" height="250%">
                                  <feGaussianBlur class="mainGlowBlur" stdDeviation="16" result="coloredBlur" />
                                  <feOffset dx="0" dy="0" result="offsetblur"></feOffset>
                                  <feFlood id="bulbGlowAlpha" flood-color="#50FFFF" flood-opacity="1"></feFlood>
                                  <feComposite in2="offsetblur" operator="atop"></feComposite>
                                  <feMerge>
                                    <feMergeNode />
                                    <feMergeNode in="SourceGraphic"></feMergeNode>
                                  </feMerge>
                                </filter>
                                <filter id="blueGlow" x="-100%" y="-100%" width="250%" height="250%">
                                  <feGaussianBlur class="mainGlowBlur" stdDeviation="6" result="coloredBlur" />
                                  <feOffset dx="0" dy="0" result="offsetblur"></feOffset>
                                  <feFlood id="bulbGlowAlpha" flood-color="#2144FB" flood-opacity="1"></feFlood>
                                  <feComposite in2="offsetblur" operator="in"></feComposite>
                                  <feMerge>
                                    <feMergeNode />
                                    <feMergeNode in="SourceGraphic"></feMergeNode>
                                  </feMerge>
                                </filter>
                                <radialGradient id="outlineGrad" cx="400" cy="100" r="300" gradientUnits="userSpaceOnUse">
                                  <stop offset="0" stop-color="#FFF" />
                                  <stop offset="0.3" stop-color="#50FFFF" stop-opacity="0.5" />
                                  <stop offset="1" stop-opacity="0" />
                                </radialGradient>
                                <radialGradient id="blueGrad" cx="400" cy="300" r="600" gradientUnits="userSpaceOnUse">
                                  <stop offset="0" stop-color="#2144FB" />
                                  <stop offset="1" stop-opacity="0" />
                                </radialGradient>
                              </defs>

                              <g class="whole">
                                <circle
                                  filter="url(#blueGlow)"
                                  class="blueRing"
                                  cx="400"
                                  cy="300"
                                  r="200"
                                  fill="none"
                                  stroke-width="8"
                                  stroke="url(#blueGrad)"
                                />

                                <g class="mainRing">
                                  <circle
                                    filter="url(#mainGlow)"
                                    cx="400"
                                    cy="300"
                                    r="200"
                                    fill="none"
                                    stroke-width="14"
                                    stroke="url(#outlineGrad)"
                                  />
                                </g>
                              </g>
                            </svg>
                          </div>
                          <div class="neiyuan">
                            <div class="loader"></div>
                          </div>
                          <div class="leijiicon">
                            <img src="image/leijijieanshu.png" alt="" />
                          </div>
                        </div>
                        <div class="num-t-r" flex="dir:top cross:center">
                          <div>累计结案数</div>
                          <div class="shangBaoShu JAS" id="JAS">6511</div>
                        </div>
                      </div>
                      <div class="num-boo" flex="cross:center main:center">
                        今日新增：<span class="today-JAS" id="today-JAS">200</span>
                      </div>
                    </li>
                  </ul>
                </div>
                <div class="files-footer">
                  <div id="centerChart"></div>
                </div>
              </div>
              <div class="files-center-b">
                <div class="files-center-b-header" flex="main:justify cross:center">
                  <div class="center-header-title">案卷分布</div>
                  <div class="center-header-nav">
                    <ul flex="dir:left main:center cross:center box:mean">
                      <li class="active"><a href="javascripy:;">总计</a></li>
                      <li><a href="javascript:;">本日</a></li>
                      <li><a href="javascript:;">本周</a></li>
                      <li><a href="javascript:;">本月</a></li>
                    </ul>
                  </div>
                </div>
                <div class="files-center-b-body">
                  <div id="charAfenbu"></div>
                </div>
              </div>
            </div>
            <div class="files-right">
              <div class="files-right-header" flex="cross:center">
                案卷列表
              </div>
              <div class="files-right-body">
                <ul>
                  <!--<li>-->
                  <!--<div class="item-header" flex="main:justify cross:center">-->
                  <!--<div class="t-h-anjuan" flex="main:left cross:center">-->
                  <!--<img src="image/anjuanbianhao.png" alt="">-->
                  <!--<span>案卷20180220AJGL</span>-->
                  <!--</div>-->
                  <!--<div class="t-h-data" flex="main:left cross:center">-->
                  <!--<span>07/20</span>-->
                  <!--<span>12:30</span>-->
                  <!--</div>-->
                  <!--</div>-->
                  <!--<div class="item-body" flex="cross:center main:center">-->
                  <!--<img src="image/anjuanimg.png" alt="">-->
                  <!--<div class="label-y" flex="mainh:top cross:center">-->
                  <!--已完成-->
                  <!--</div>-->
                  <!--</div>-->
                  <!--<div class="item-footer">-->
                  <!--<div class="fenlei">-->
                  <!--<span>分类：</span><span>[市容环境] 类小类小类小类小类小小小小类小类小类小小小小类小类小类小小小</span>-->
                  <!--</div>-->
                  <!--<div class="miaoshu">-->
                  <!--<span>描述：</span><span> 描述描述描述描述描述描述描述描述描述描述描述描述描述描述描述描述描述描述 描述描述描述描述描述描述描述描述描述描述描述描述描述描述描述描述描述描述</span>-->
                  <!--</div>-->
                  <!--</div>-->
                  <!--</li>-->
                </ul>
              </div>
            </div>
          </div>
        </div>
        <!--主题内容-->
      </div>
    </div>

    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript" src="js/echarts.min.js"></script>
    <script type="text/javascript" src="js/echarts-gl.js"></script>
    <script type="text/javascript" src="js/echarts-wordcloud.min.js"></script>
    <script type="text/javascript" src="js/charts-filed.js"></script>
    <script type="text/javascript" src="js/countUp.js"></script>
    <script>
      //数字跳动
      var options = {
        useEasing: true,
        useGrouping: false,
        separator: ',',
        decimal: '.',
      };
      var ZSLS = null;
      var LAS = null;
      var CZS = null;
      var JAS = null;
      var todayZSLS = null;
      var todayLAS = null;
      var todayCZS = null;
      var todayJAS = null;
      $(function() {
        initJump();
        //累计数量
        // getAjax(0);
        //今日新增
        // getAjax(1);
        //案卷统计
        getSourceType();
        //高发问题TOP5
        getTop5();
        // getFileCount(7);
        //案卷热词分析
        getWordCould();
        // 案卷处理概况
        getEventDealsurvey();
        // getFileCount(8);
        // 案卷处理概况-图表
        getEventDealsurveyTrend();
        // 案卷分布
        getEventPublish(0);
        // 案卷列表
        getCaseList();

        //获取最近7天数据
        // getSevenDatas();
        //案卷分布type 0全部 1本日 2本周  3本月
        // getFiledistribution(0);
        //点击按钮切换本日本周本月
        $('.center-header-nav ul li').click(function() {
          getEventPublish($(this).index());
        });
        //获取案卷列表
        // getFileList();
        //开启定时器
        // var timer1 = setInterval("getAjax(0);",5000);
        // var timer2 = setInterval("getAjax(1);",5000);
      });

      /*测试库*/

      var url = 'http://192.168.71.33:81/';
      //    var url = "http://60.191.224.129:83/"; <!-- 正式 -->
      var url2 = 'http://192.168.71.136:8080';
      function getSourceType() {
        $.ajax({ method: 'POST', url: url2 + '/api/bigscreen/lyfs', dataType: 'json' }).done(function(data) {
          if (data && data.result && data.result.length > 0) {
            var arr = [];
            for (var i = 0; i < data.result.length; i++) {
              arr.push({ name: data.result[i].name, value: data.result[i].num });
            }
            getSource(arr, 'chartsSource');
          }
        });
      }
      function getTop5() {
        $.ajax({ method: 'POST', url: url2 + '/api/bigscreen/top5', dataType: 'json' }).done(function(data) {
          if (data && data.result && data.result.length > 0) {
            var xData = [];
            var yData = [];
            for (var i = 0; i < data.result.length; i++) {
              xData.push(data.result[i].name);
              yData.push(data.result[i].num);
            }
            getTopEvents(xData, yData, data.result);
          }
        });
      }
      function getWordCould() {
        $.ajax({ method: 'POST', url: url2 + '/api/bigscreen/hotWords', dataType: 'json' }).done(function(data) {
          if (data && data.result && data.result.length > 0) {
            var arr = [];
            for (var i = 0; i < data.result.length; i++) {
              arr.push({ name: data.result[i].name, value: data.result[i].num });
            }
            getHotWords(arr);
          }
        });
      }
      function getEventDealsurvey() {
        $.ajax({ method: 'POST', url: url + '/api/bigscreen/eventDealsurvey', dataType: 'json' }).done(function(data) {
          if (data && data.result) {
            $('.ZSLS').html(data.result.sbs); // 累计上报数
            $('.LAS').html(data.result.las); // 累计立案数
            $('.CZS').html(data.result.cls); // 累计处理数
            $('.JAS').html(data.result.jas); // 累计结案数
            $('.today-ZSLS').html(data.result.today_sbs); // 今日新增-累计上报数
            $('.today-LAS').html(data.result.today_las); // 今日新增-累计立案数
            $('.today-CZS').html(data.result.today_cls); // 今日新增-累计处理数
            $('.today-JAS').html(data.result.today_jas); // 今日新增-累计结案数
          }
          //运行数据
          szBeat(data.result.zsls, data.result.las, data.result.czs, data.result.jas, type);
        });
      }
      function getEventDealsurveyTrend() {
        $.ajax({ method: 'POST', url: url2 + '/api/bigscreen/eventDealsurveyTrend', dataType: 'json' }).done(function(data) {
          if (data && data.result && data.result.length > 0) {
            var sbsArr = [];
            var lasArr = [];
            var czsArr = [];
            var jasArr = [];
            var dateArr = [];
            for (var i = 0; i < data.result.length; i++) {
              sbsArr.push(data.result[i].sbs);
              lasArr.push(data.result[i].las);
              czsArr.push(data.result[i].cls);
              jasArr.push(data.result[i].jas);
              dateArr.push(data.result[i].date);
            }
            showSevenDatas(sbsArr.reverse(), lasArr.reverse(), czsArr.reverse(), dateArr.reverse());
          }
        });
      }
      function getEventPublish(index) {
        console.log(index);
        var type = '';
        if (index === 1) type = 'day';
        else if (index === 2) type = 'week';
        else if (index === 3) type = 'month';
        $.ajax({ method: 'POST', url: url2 + '/api/bigscreen/eventPublish', dataType: 'json', data: { type: type } }).done(
          function(data) {
            if (data && data.result && data.result.length > 0) {
              var streetArr = [];
              var clsArr = [];
              var lasArr = [];
              var sbsArr = [];
              for (var i = 0; i < data.result.length; i++) {
                streetArr.push(data.result[i].street);
                clsArr.push(data.result[i].cls);
                lasArr.push(data.result[i].las);
                sbsArr.push(data.result[i].sbs);
              }
              showFileDatas(streetArr, clsArr, lasArr, sbsArr);
            }
          },
        );
      }
      function getCaseList() {
        $.ajax({ method: 'POST', url: url2 + '/api/bigscreen/eventList', dataType: 'json' }).done(function(data) {
          if (data && data.result && data.result.length > 0) {
            var target = data.result;
            for (var i = 0; i < target.length; i++) {
              var moment = new Date(+target[i].createtime);
              var date = moment.getMonth() + 1 + '/' + moment.getDate();
              var hour = moment.getHours();
              $('.files-right-body ul').append(
                ' <li>\n' +
                  '<div class="item-header" flex="main:justify cross:center">\n' +
                  '<div class="t-h-anjuan" flex="main:left cross:center">\n' +
                  '<img src="image/anjuanbianhao.png" alt="">\n' +
                  '<span>案卷' +
                  target[i].taskcode +
                  '</span>\n' +
                  '</div>\n' +
                  '<div class="t-h-data" flex="main:left cross:center">\n' +
                  '<span>' +
                  date +
                  '</span>\n' +
                  '<span>' +
                  hour +
                  '</span>\n' +
                  '</div>\n' +
                  '</div>\n' +
                  '<div class="item-body" flex="cross:center main:center">\n' +
                  "<img src='" +
                  target[i].path +
                  '\' alt="">\n' +
                  '<div class="label-n" flex="mainh:top cross:center">' +
                  target[i].statusname +
                  '</div>\n' +
                  '</div>\n' +
                  '<div class="item-footer">\n' +
                  '<div class="fenlei">\n' +
                  '<span>分类：</span><span>[' +
                  target[i].type2name +
                  '] ' +
                  target[i].type3name +
                  '</span>\n' +
                  '</div>\n' +
                  '<div class="miaoshu">\n' +
                  '<span>描述：</span><span>' +
                  target[i].eventdesc +
                  '</span>\n' +
                  '</div>\n' +
                  '</div>\n' +
                  '</li>',
              );
            }
          }
        });
      }

      //获取运行总量数据
      function getAjax(type) {
        $.ajax({ method: 'POST', url: url + 'api/bigScreen/index/data', dataType: 'json', data: { type: type } })
          .done(function(data) {
            if (data && data.result) {
              if (type == 0) {
                $('.ZSLS').html(data.result.zsls);
                $('.LAS').html(data.result.las);
                $('.CZS').html(data.result.czs);
                $('.JAS').html(data.result.jas);
              } else if (type == 1) {
                $('.today-ZSLS').html(data.result.zsls);
                $('.today-LAS').html(data.result.las);
                $('.today-CZS').html(data.result.czs);
                $('.today-JAS').html(data.result.jas);
              }
              //运行数据
              szBeat(data.result.zsls, data.result.las, data.result.czs, data.result.jas, type);
            }
          })
          .fail(function() {
            console.log('请求api/bigScreen/index/data接口失败！');
          });
      }

      //获取案卷统计
      function getFileCount(type) {
        $.ajax({
          method: 'POST',
          url: url + 'api/bigScreen/ajtj',
          dataType: 'json',
          data: { type: type },
        })
          .done(function(data) {
            if (data && data.result && data.result.length > 0) {
              if (type == 7) {
                // var xData = ["污水井盖", "上水井盖", "户外广告", "渣土乱倒", "热力管道"];
                // var yData = [110, 100, 80, 70, 50];
                var xData = [];
                var yData = [];
                getNameAndCount(data.result, xData, yData);
              } else if (type == 8) {
                var JosnList = [];
                getJson(data.result, JosnList, type);
              }
            }
          })
          .fail(function() {
            console.log('请求api/bigScreen/ajtj接口失败！');
          });
      }

      //获取7天数据
      function getSevenDatas() {
        $.ajax({ method: 'POST', url: url + 'api/bigScreen/last7Days', contentType: 'text/plain', dataType: 'json' })
          .done(function(data) {
            if (data && data.result && data.result.length > 0) {
              var absArr = [];
              var lasArr = [];
              var czsArr = [];
              var dateArr = [];
              getSevenDatasArr(data.result, absArr, lasArr, czsArr, dateArr);
            }
          })
          .fail(function() {
            console.log('请求api/bigScreen/last7Days接口失败！');
          });
      }

      //案卷分布ajax获取数据
      function getFiledistribution(type) {
        $.ajax({ method: 'POST', url: url + 'api/bigScreen/ajfb', dataType: 'json', data: { type: type } })
          .done(function(data) {
            if (data && data.result && data.result.length > 0) {
              var streetnameArr = [];
              var ksclArr = [];
              var asclArr = [];
              var csclArr = [];
              getFileSistributionDatas(data.result, streetnameArr, ksclArr, asclArr, csclArr);
            }
          })
          .fail(function() {
            console.log('请求api/bigScreen/index/data接口失败！');
          });
      }

      //获取7天数据echart使用
      function getSevenDatasArr(target, sbsArr, lasArr, czsArr, dateArr) {
        for (var i = 0; i < target.length; i++) {
          if (target[i].name == 'sbs') {
            sbsArr.push(target[i].count);
            dateArr.push(target[i].mark);
          } else if (target[i].name == 'las') {
            lasArr.push(target[i].count);
          } else if (target[i].name == 'czs') {
            czsArr.push(target[i].count);
          }
        }
        showSevenDatas(sbsArr.reverse(), lasArr.reverse(), czsArr.reverse(), dateArr.reverse());
      }

      //转json
      function getJson(target, arr, type) {
        for (var i = 0; i < target.length; i++) {
          var obj = { name: target[i].name, value: target[i].count };
          arr.push(obj);
        }
        if (type == 8) getHotWords(arr);
      }

      //获取名字及数量
      function getNameAndCount(target, arrName, arrCount) {
        for (var i = 0; i < target.length; i++) {
          arrName.push(target[i].name);
          arrCount.push(target[i].count);
        }
        getTopEvents(arrName, arrCount);
      }

      //获取案卷分布的数据
      function getFileSistributionDatas(target, streetnameArr, ksclArr, asclArr, csclArr) {
        for (var i = 0; i < target.length; i++) {
          streetnameArr.push(target[i].streetname);
          ksclArr.push(target[i].kscls);
          asclArr.push(target[i].ascls);
          csclArr.push(target[i].cscls);
        }
        showFileDatas(streetnameArr, ksclArr, asclArr, csclArr);
      }

      //获取案卷列表
      function getFileList() {
        $.ajax({ method: 'POST', url: url + 'api/bigScreen/ajlb', contentType: 'text/plain', dataType: 'json' })
          .done(function(data) {
            if (data && data.result && data.result.length > 0) {
              forInsertFileList(data.result);
            }
          })
          .fail(function() {
            console.log('请求api/bigScreen/ajlb接口失败！');
          });
      }

      //循环渲染案卷列表方法
      function forInsertFileList(target) {
        for (var i = 0; i < target.length; i++) {
          $('.files-right-body ul').append(
            ' <li>\n' +
              '<div class="item-header" flex="main:justify cross:center">\n' +
              '<div class="t-h-anjuan" flex="main:left cross:center">\n' +
              '<img src="image/anjuanbianhao.png" alt="">\n' +
              '<span>案卷' +
              target[i].taskcode +
              '</span>\n' +
              '</div>\n' +
              '<div class="t-h-data" flex="main:left cross:center">\n' +
              '<span>' +
              target[i].day +
              '</span>\n' +
              '<span>' +
              target[i].hour +
              '</span>\n' +
              '</div>\n' +
              '</div>\n' +
              '<div class="item-body" flex="cross:center main:center">\n' +
              "<img src='" +
              target[i].filepath +
              '\' alt="">\n' +
              "<div class='" +
              (target[i].status == 0 ? 'label-n' : 'label-y') +
              '\' flex="mainh:top cross:center">' +
              (target[i].status == 0 ? '未完成' : '已完成') +
              '</div>\n' +
              '</div>\n' +
              '<div class="item-footer">\n' +
              '<div class="fenlei">\n' +
              '<span>分类：</span><span>[' +
              target[i].type2id +
              '] ' +
              target[i].type3id +
              '</span>\n' +
              '</div>\n' +
              '<div class="miaoshu">\n' +
              '<span>描述：</span><span>' +
              target[i].eventdesc +
              '</span>\n' +
              '</div>\n' +
              '</div>\n' +
              '</li>',
          );
        }
      }

      //跳动数字初始化
      function initJump() {
        ZSLS = new CountUp('ZSLS', 0, 0, 0, 0.1, options);
        LAS = new CountUp('LAS', 0, 0, 0, 0.1, options);
        CZS = new CountUp('CZS', 0, 0, 0, 0.1, options);
        JAS = new CountUp('JAS', 0, 0, 0, 0.1, options);
        todayZSLS = new CountUp('today-ZSLS', 0, 0, 0, 0.1, options);
        todayLAS = new CountUp('today-LAS', 0, 0, 0, 0.1, options);
        todayCZS = new CountUp('today-CZS', 0, 0, 0, 0.1, options);
        todayJAS = new CountUp('today-JAS', 0, 0, 0, 0.1, options);
      }

      function szBeat(ZSLSV, LASV, CZSV, JASV, type) {
        if (type == 0) {
          ZSLS.update(ZSLSV);
          LAS.update(LASV);
          CZS.update(CZSV);
          JAS.update(JASV);
          /*开始跳动*/
          ZSLS.start();
          LAS.start();
          CZS.start();
          JAS.start();
        } else if (type == 1) {
          todayZSLS.update(ZSLSV);
          todayLAS.update(LASV);
          todayCZS.update(CZSV);
          todayJAS.update(JASV);
          todayZSLS.start();
          todayLAS.start();
          todayCZS.start();
          todayJAS.start();
        }
      }
    </script>
  </body>
</html>
